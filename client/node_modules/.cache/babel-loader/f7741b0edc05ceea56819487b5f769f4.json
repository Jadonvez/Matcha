{"ast":null,"code":"var _jsxFileName = \"/Users/Polcito/Documents/jacko/matcha-1/client/src/pages/SettingProfil.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Navbar from \"../components/navbar_unlog\";\nimport '../styles/pages/_settingprofil.scss';\nimport { useSelector } from 'react-redux';\nimport { differenceInYears } from 'date-fns';\nimport UploadImg from '../components/profil/UploadImg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SettingProfil = () => {\n  _s();\n\n  const [name, setName] = useState(\"\");\n  const [firstname, setFirstname] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [mail, setMail] = useState(\"\"); //const [dob, setDob] = useState(\"\");\n  //const [gender, setGender] = useState(\"\");\n  //const [orientation, setOrientation] = useState(\"\");\n  //const [error, setError] = useState();\n\n  const [isLoading, setIsLoading] = useState(true);\n  const userData = useSelector(state => state.userReducer);\n  useEffect(() => {\n    if (userData) {\n      setIsLoading(false);\n    }\n  }, [userData]);\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Chargement...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 16\n    }, this);\n  } //les fonctions sont ici\n  // async function update_name(e)\n  // {\n  //     e.preventDefault();\n  //     if (name.trim().length === 0)\n  //     {   \n  //         //gérer les erreurs ici\n  //         return ;\n  //     }\n  //     axios({\n  //         method: \"post\",\n  //         url: `http://localhost:5000/api/user/`,\n  //         withCredentials: true,\n  //         data: {\n  //             name,\n  //         }\n  //     })\n  // }\n\n\n  async function update_profil(e) {\n    e.preventDefault();\n\n    if (name.trim().length === 0 || firstname.trim().length === 0 || mail.trim().length === 0 || password.trim().length === 0) {\n      // setError({\n      //     title: \"Un ou plusieurs champs sont vides\",\n      //     message: \"Veuillez remplir les champs manquants\"\n      // })\n      console.log(\"c'est vide\");\n      return;\n    }\n\n    axios({\n      method: \"post\",\n      url: `http://localhost:5000/api/user/update_profil`,\n      withCredentials: true,\n      data: {\n        name,\n        firstname,\n        //password,\n        mail //dob,\n        //gender,\n        //orientation,\n\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        console.log('enregistrement réussi form envoyé'); //setFormSubmit(true);\n      } else {\n        console.log(\"item\");\n      }\n    }).catch(err => {\n      console.log(err); //setError(true);\n\n      if (err.response.data.error === \"password invalide\" || err.response.data.error === \"Le mail existe deja\") {\n        // setError({\n        //     title: \"Erreur de connection\",\n        //     message: err.response.data.error\n        // })\n        console.log(\"Erreur de connection (mdp ou mail)\");\n      }\n    });\n  }\n\n  ; //\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: update_profil,\n      className: \"little_form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Pr\\xE9nom\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this), userData && userData[0] ? /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"little_input\",\n          required: true,\n          type: \"text\",\n          value: name,\n          onChange: e => setName(e.target.value),\n          id: \"Pr\\xE9nom\",\n          placeholder: userData[0].name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 44\n        }, this) : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Nom\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this), userData && userData[0] ? /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"\",\n          required: true,\n          type: \"text\",\n          value: firstname,\n          onChange: e => setFirstname(e.target.value),\n          id: \"Nom\",\n          placeholder: userData[0].firstname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 44\n        }, this) : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this), userData && userData[0] ? /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"\",\n          required: true,\n          type: \"text\",\n          value: mail,\n          onChange: e => setMail(e.target.value),\n          id: \"Email\",\n          placeholder: userData[0].mail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 44\n        }, this) : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"\",\n          required: true,\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          id: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"genre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"orientation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"bio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Photo de profil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Envoyer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SettingProfil, \"olDK4LbcUjB0RedneMKYM+Yv59g=\", false, function () {\n  return [useSelector];\n});\n\n_c = SettingProfil;\nexport default SettingProfil;\n\nvar _c;\n\n$RefreshReg$(_c, \"SettingProfil\");","map":{"version":3,"names":["React","useEffect","useState","axios","Navbar","useSelector","differenceInYears","UploadImg","SettingProfil","name","setName","firstname","setFirstname","password","setPassword","mail","setMail","isLoading","setIsLoading","userData","state","userReducer","update_profil","e","preventDefault","trim","length","console","log","method","url","withCredentials","data","then","res","status","catch","err","response","error","target","value"],"sources":["/Users/Polcito/Documents/jacko/matcha-1/client/src/pages/SettingProfil.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Navbar from \"../components/navbar_unlog\";\nimport '../styles/pages/_settingprofil.scss';\nimport { useSelector } from 'react-redux';\nimport { differenceInYears } from 'date-fns';\nimport UploadImg from '../components/profil/UploadImg';\n\nconst SettingProfil = () => {\n    \n        const [name, setName] = useState(\"\");\n        const [firstname, setFirstname] = useState(\"\");\n        const [password, setPassword] = useState(\"\");\n        const [mail, setMail] = useState(\"\");\n        //const [dob, setDob] = useState(\"\");\n        //const [gender, setGender] = useState(\"\");\n        //const [orientation, setOrientation] = useState(\"\");\n        //const [error, setError] = useState();\n\n    const [isLoading, setIsLoading] = useState(true);\n    const userData = useSelector((state) => state.userReducer)\n\n    useEffect(() => {\n        if (userData) {\n            setIsLoading(false);\n        }\n    }, [userData]);\n\n    if (isLoading) {\n        return <div>Chargement...</div>;\n    }\n\n    //les fonctions sont ici\n    // async function update_name(e)\n    // {\n    //     e.preventDefault();\n    //     if (name.trim().length === 0)\n    //     {   \n    //         //gérer les erreurs ici\n    //         return ;\n    //     }\n\n    //     axios({\n    //         method: \"post\",\n    //         url: `http://localhost:5000/api/user/`,\n    //         withCredentials: true,\n    //         data: {\n    //             name,\n    //         }\n    //     })\n    // }\n\n\n    async function update_profil(e)\n    {\n        e.preventDefault();\n\n        if (name.trim().length === 0 || firstname.trim().length === 0 ||\n            mail.trim().length === 0 || password.trim().length === 0)\n        {\n            // setError({\n            //     title: \"Un ou plusieurs champs sont vides\",\n            //     message: \"Veuillez remplir les champs manquants\"\n            // })\n            console.log(\"c'est vide\")\n            return;\n        }\n\n        axios({\n            method: \"post\",\n            url: `http://localhost:5000/api/user/update_profil`,\n            withCredentials: true,\n            data: {\n                name,\n                firstname,\n                //password,\n                mail,\n                //dob,\n                //gender,\n                //orientation,\n            }\n        })\n            .then((res) => {\n                if (res.status === 200) {\n                    console.log('enregistrement réussi form envoyé');\n                    //setFormSubmit(true);\n                } else {\n                    console.log(\"item\");\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n                //setError(true);\n                if (err.response.data.error === \"password invalide\" || err.response.data.error === \"Le mail existe deja\")\n                {\n                    // setError({\n                    //     title: \"Erreur de connection\",\n                    //     message: err.response.data.error\n                    // })\n                    console.log(\"Erreur de connection (mdp ou mail)\")\n                }\n            })\n    };\n\n    //\n\n    return (\n        <div>\n            <form onSubmit={update_profil} className='little_form'>\n            <div>\n                <h5>Prénom</h5>\n                {userData && userData[0] ? <input className=\"little_input\" required type=\"text\" value={name} onChange={(e)=>setName(e.target.value)} id=\"Prénom\" placeholder={userData[0].name} /> : \"\"}\n            </div>\n            <div>\n                <h5>Nom</h5>\n                {userData && userData[0] ? <input className=\"\" required type=\"text\" value={firstname} onChange={(e)=>setFirstname(e.target.value)} id=\"Nom\" placeholder={userData[0].firstname} /> : \"\"}\n            </div>\n            <div>\n                <h5>Email</h5>\n                {userData && userData[0] ? <input className=\"\" required type=\"text\" value={mail} onChange={(e)=>setMail(e.target.value)} id=\"Email\" placeholder={userData[0].mail} /> : \"\"}\n            </div>\n            <div>\n                <h5>password</h5>\n                <input className=\"\" required type=\"password\" value={password} onChange={(e)=>setPassword(e.target.value)} id=\"password\" />\n            </div>\n            <div>\n                <h5>genre</h5>\n            </div>\n            <div>\n                <h5>orientation</h5>\n            </div>\n            <div>\n                <h5>bio</h5>\n            </div>\n            <div>\n                <h5>Photo de profil</h5>\n            </div>\n                <input type=\"submit\" value=\"Envoyer\"/>\n            </form>\n        </div>\n    );\n};\n\nexport default SettingProfil;"],"mappings":"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"},"metadata":{},"sourceType":"module"}